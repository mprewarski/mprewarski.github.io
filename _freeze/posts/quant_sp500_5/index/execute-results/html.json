{
  "hash": "21f7b1a43cdd04d290725e11430dd0f0",
  "result": {
    "markdown": "---\ntitle: \"S&P500 ML Quant Strategy\"\ndescription: \"This is a live strategy for investing in 5 stocks from the S&P 500\"\ndate: \"1/26/2026\"\ndraft: false\ncategories:\n  - S&P500\n  - Machine Learning\n  - LightGBM\n  - Quant\nexecute:\n  python: /Users/marcusprewarski/projects/venv/bin/python\n---\n\n# S&P500 5 ML Quant Strategy\n\nThis is a quantitative stock selection strategy. It uses machine learning (ML) models to rank stocks\nin the S&P500 and selects the highest ranking ones.\n\nThis strategy has been live since November 26 and this chart shows the performance and some basic statistics.\nIn the chart below the benchmark is the S&P500.\n\n<iframe width=\"490\" height=\"865\" src=\"https://www.portfolio123.com/embedded_port.jsp?portid=1898665&amp;title=1&amp;stats=1&amp;chartH=475&amp;chartW=440\" frameborder=\"0\"></iframe>\n\n\nThese are the holdings as of 1/26/2026.\n\n::: {.cell execution_count=1}\n\n::: {.cell-output .cell-output-display execution_count=13}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>Ticker</th>\n      <th>Weight</th>\n      <th>Return %</th>\n      <th>Return</th>\n      <th>Rank</th>\n      <th>Shares</th>\n      <th>Avg Share Cost*</th>\n      <th>Current Price</th>\n      <th>Value</th>\n      <th>Days Held</th>\n      <th>Sector</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>NaN</td>\n      <td>DDOG</td>\n      <td>19.94%</td>\n      <td>-0.11%</td>\n      <td>-218.18</td>\n      <td>99.8</td>\n      <td>1557.0</td>\n      <td>130.27</td>\n      <td>130.13</td>\n      <td>202612.41</td>\n      <td>-3</td>\n      <td>Technology</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>NaN</td>\n      <td>GRMN</td>\n      <td>20.79%</td>\n      <td>5.50%</td>\n      <td>11024.09</td>\n      <td>96.4</td>\n      <td>1025.0</td>\n      <td>195.41</td>\n      <td>206.17</td>\n      <td>211324.25</td>\n      <td>56</td>\n      <td>Technology</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>NaN</td>\n      <td>META</td>\n      <td>20.42%</td>\n      <td>2.05%</td>\n      <td>4174.98</td>\n      <td>99.0</td>\n      <td>315.0</td>\n      <td>645.51</td>\n      <td>658.76</td>\n      <td>207509.40</td>\n      <td>56</td>\n      <td>Technology</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>NaN</td>\n      <td>MSFT</td>\n      <td>18.38%</td>\n      <td>2.58%</td>\n      <td>4691.76</td>\n      <td>96.8</td>\n      <td>401.0</td>\n      <td>454.25</td>\n      <td>465.95</td>\n      <td>186845.95</td>\n      <td>3</td>\n      <td>Technology</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>NaN</td>\n      <td>NVDA</td>\n      <td>20.46%</td>\n      <td>5.65%</td>\n      <td>11115.72</td>\n      <td>89.0</td>\n      <td>1108.0</td>\n      <td>177.64</td>\n      <td>187.67</td>\n      <td>207938.36</td>\n      <td>56</td>\n      <td>Technology</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nBelow is a table of recent transactions.\n\n::: {.cell execution_count=2}\n\n::: {.cell-output .cell-output-display execution_count=14}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th>AI SP500 9MRel RD 5</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Date</th>\n      <th>Symbol</th>\n      <th>Type</th>\n      <th>Shares</th>\n      <th>Price</th>\n      <th>Amount</th>\n      <th>TotFees</th>\n      <th>Rank</th>\n      <td>Notes</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">2026-01-26</th>\n      <th>DDOG</th>\n      <th>BUY</th>\n      <th>1,557.00</th>\n      <th>130.13</th>\n      <th>-202,830.59</th>\n      <th>-218.18</th>\n      <th>99.40</th>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>TTWO</th>\n      <th>SELL</th>\n      <th>-820.00</th>\n      <th>245.73</th>\n      <th>201,288.90</th>\n      <th>-209.70</th>\n      <th>91.40</th>\n      <td>Rank</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">2026-01-20</th>\n      <th>MSFT</th>\n      <th>BUY</th>\n      <th>401.00</th>\n      <th>453.78</th>\n      <th>-182,154.19</th>\n      <th>-188.41</th>\n      <th>99.60</th>\n      <td>*</td>\n    </tr>\n    <tr>\n      <th>FTNT</th>\n      <th>SELL</th>\n      <th>-2,480.00</th>\n      <th>75.0175</th>\n      <th>185,831.66</th>\n      <th>-211.74</th>\n      <th>91.80</th>\n      <td>*Rank</td>\n    </tr>\n    <tr>\n      <th rowspan=\"5\" valign=\"top\">2025-11-28</th>\n      <th>FTNT</th>\n      <th>BUY</th>\n      <th>2,480.00</th>\n      <th>80.9925</th>\n      <th>-201,085.96</th>\n      <th>-224.564</th>\n      <th>99.00</th>\n      <td>*</td>\n    </tr>\n    <tr>\n      <th>META</th>\n      <th>BUY</th>\n      <th>315.00</th>\n      <th>644.8625</th>\n      <th>-203,334.42</th>\n      <th>-202.7371</th>\n      <th>99.20</th>\n      <td>*</td>\n    </tr>\n    <tr>\n      <th>TTWO</th>\n      <th>BUY</th>\n      <th>820.00</th>\n      <th>245.5925</th>\n      <th>-201,593.83</th>\n      <th>-207.9766</th>\n      <th>99.40</th>\n      <td>*</td>\n    </tr>\n    <tr>\n      <th>NVDA</th>\n      <th>BUY</th>\n      <th>1,108.00</th>\n      <th>177.4475</th>\n      <th>-196,822.64</th>\n      <th>-210.8081</th>\n      <th>99.60</th>\n      <td>*</td>\n    </tr>\n    <tr>\n      <th>GRMN</th>\n      <th>BUY</th>\n      <th>1,025.00</th>\n      <th>195.21</th>\n      <th>-200,300.16</th>\n      <th>-209.9097</th>\n      <th>99.80</th>\n      <td>*</td>\n    </tr>\n    <tr>\n      <th>2025-11-26</th>\n      <th>NaN</th>\n      <th>CASH</th>\n      <th>NaN</th>\n      <th>NaN</th>\n      <th>1,000,000.00</th>\n      <th>NaN</th>\n      <th>NaN</th>\n      <td>Starting cash</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nThere are different components to a quantitative stock selection strategy.\n\n### Stock Universe\n\nThe Universe is the group of stocks used in the strategy. This one uses only stocks within the S&P500 index.\n\n\n### Ranking System\n\nThe Ranking System ranks all the stocks in the Universe from best to worst. This one uses a ML model to do the\nranking. The model architecture used is LightGBM which is a kind of boosted regression tree model. It is \ntrained on about 70 different features over 15 years of data. The feature set includes a wide variety of data\nincluding value, growth, quality, momentum and sentiment. I will write more about this in a different post.\n\n\n### Buy/Sell Strategy\n\nInitially, the strategy selects the top 5 ranked stocks from the S&P500. The portfolio is rebalanced once a week. If any stocks ranking falls out of the top 8% then it is sold and replaced by the highest ranked stock\nnot currently in the portfolio.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}